<!DOCTYPE module SYSTEM "module.dtd">

<module name="mekf_wind_float" dir="mekf_wind">
  <doc>
    <description>
      MEKF-Wind (in float).
      Estimates attitude, velocity, position, (gyro, accel, baro) biases and wind velocity.
    </description>
    <configure name="USE_MAGNETOMETER" value="TRUE|FALSE" description="use magnetometer"/>
    <configure name="AHRS_ALIGNER_LED" value="2" description="LED number to indicate if AHRS/INS is aligned"/>
  </doc>
  <header>
    <file name="mekf_wind_float_wrapper.h"/>
  </header>
  <init fun="mekf_wind_float_wrapper_init()"/>
  <periodic fun="mekf_wind_aoa_periodic()" freq="20"/>
  <makefile target="ap|nps">
    <configure name="USE_MAGNETOMETER" default="TRUE"/>
    <define name="USE_MAGNETOMETER" cond="ifeq (,$(findstring $(USE_MAGNETOMETER),0 FALSE))"/>
    <define name="LOG_MEKFW_FILTER" value="TRUE" description="enable logging on SD card (default: FALSE)"/>
    <!--file name="ahrs_aligner.c" dir="subsystems/ahrs"/>
    <file name="ins.c" dir="subsystems"/-->
    <file name="mekf_wind_float.c"/>
    <file name="mekf_wind_float_wrapper.c"/>
    <configure name="AOA_PWM_CHANNEL" value="PWM_INPUTX" description="Select PWM input channel for AOA sensor"/>
    <define name="USE_AHRS_ALIGNER"/>
    <!--define name="INS_TYPE_H" value="subsystems/mekf_wind/mekf_wind_float_wrapper.h" type="string"/-->
    <define name="AOA_PWM_CHANNEL" value="$(AOA_PWM_CHANNEL)" cond="ifdef AOA_PWM_CHANNEL"/>
          <define name="$(AOA_PWM_CHANNEL)_TICKS_PER_USEC" value="1"/>
          <define name="USE_$(AOA_PWM_CHANNEL)" value="PWM_PULSE_TYPE_ACTIVE_LOW"/>
  </makefile>

   
</module>